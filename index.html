<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š MSTR MNAV ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .icon {
            width: 50px;
            height: 50px;
            background: #FFA500;
            border-radius: 8px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 1em;
            opacity: 0.9;
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-weight: 500;
        }

        input[type="number"]:focus {
            outline: 3px solid #FFA500;
        }

        button {
            width: 100%;
            padding: 18px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 144, 226, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .result-value {
            font-size: 1.3em;
            font-weight: bold;
        }

        .premium-positive {
            color: #4ADE80;
        }

        .premium-negative {
            color: #F87171;
        }

        .tip-box {
            background: rgba(255, 165, 0, 0.2);
            border-left: 4px solid #FFA500;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .tip-box p {
            margin: 5px 0;
            font-size: 0.95em;
        }

        .reset-btn {
            background: rgba(239, 68, 68, 0.8);
            margin-top: 10px;
            padding: 12px;
            font-size: 1em;
        }

        .reset-btn:hover {
            background: rgba(239, 68, 68, 1);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            
            .icon {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <div class="icon"></div>
                MSTR MNAV ê³„ì‚°ê¸°
            </h1>
            <p class="subtitle">ê°„ë‹¨ ë²„ì „ - ìˆ˜ë™ ì…ë ¥</p>
        </header>

        <div class="card">
            <h2 class="card-title">ğŸ’° í˜„ì¬ ê°€ê²© ì…ë ¥</h2>
            
            <div class="input-group">
                <label for="btcPrice">BTC ê°€ê²© ($)</label>
                <input type="number" id="btcPrice" placeholder="68443" step="0.01">
            </div>

            <div class="input-group">
                <label for="mstrPrice">MSTR ì£¼ê°€ ($)</label>
                <input type="number" id="mstrPrice" placeholder="133.88" step="0.01">
            </div>

            <div class="input-group">
                <label for="btcHoldings">BTC ë³´ìœ ëŸ‰ (ê°œ)</label>
                <input type="number" id="btcHoldings" placeholder="714644" step="1">
            </div>

            <div class="input-group">
                <label for="sharesOutstanding">í¬ì„ ì£¼ì‹ ìˆ˜ (ë°±ë§Œ)</label>
                <input type="number" id="sharesOutstanding" placeholder="365.461" step="0.001">
            </div>

            <button onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>
            <button class="reset-btn" onclick="resetToDefaults()">ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”</button>
        </div>

        <div class="card">
            <h2 class="card-title">ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-item">
                <span class="result-label">BTC ì´ ê°€ì¹˜</span>
                <span class="result-value" id="totalBtcValue">-</span>
            </div>

            <div class="result-item">
                <span class="result-label">ì£¼ë‹¹ MNAV</span>
                <span class="result-value" id="mnavPerShare">-</span>
            </div>

            <div class="result-item">
                <span class="result-label">í”„ë¦¬ë¯¸ì—„/ë””ìŠ¤ì¹´ìš´íŠ¸</span>
                <div>
                    <div class="result-value" id="premiumPercent">-</div>
                    <div id="premiumLabel" style="font-size: 0.9em; opacity: 0.8;">-</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">ğŸ§® ë¹ ë¥¸ ê³„ì‚°</h2>
            
            <div class="input-group">
                <label for="targetBtcPrice">BTCê°€ ì´ ê°€ê²©ì´ ë˜ë©´?</label>
                <input type="number" id="targetBtcPrice" placeholder="100000" step="0.01">
            </div>

            <div class="input-group">
                <label for="expectedPremium">ì˜ˆìƒ í”„ë¦¬ë¯¸ì—„ (%)</label>
                <input type="number" id="expectedPremium" placeholder="100" step="0.1">
            </div>

            <button onclick="predictPrice()">MSTR ê°€ê²© ì˜ˆì¸¡</button>

            <div class="result-item" style="margin-top: 20px;">
                <span class="result-label">ì˜ˆìƒ MSTR ê°€ê²©:</span>
                <span class="result-value" id="predictedPrice">-</span>
            </div>

            <div class="tip-box">
                <p><strong>âš ï¸ ë‚˜ëŠ” ë°˜ë“œì‹œ ë°±ë§Œì¥ìê°€ ëœë‹¤^^</strong></p>
                <p><strong>ğŸ’¡ íŒ:</strong> mnav -10ì´ë©´ ë§¤ìˆ˜í•œë‹¤</p>
                <p>MNAV: 1.1 / 1.5 / 2.5</p>
                <p>MSTR: <a href="https://www.strategy.com" target="_blank" style="color: #FFA500;">https://www.strategy.com</a></p>
            </div>
        </div>
    </div>

    <script>
        // localStorage í‚¤ ìƒìˆ˜
        const STORAGE_KEYS = {
            BTC_PRICE: 'mnav_btc_price',
            MSTR_PRICE: 'mnav_mstr_price',
            BTC_HOLDINGS: 'mnav_btc_holdings',
            SHARES_OUTSTANDING: 'mnav_shares_outstanding',
            TARGET_BTC_PRICE: 'mnav_target_btc_price',
            EXPECTED_PREMIUM: 'mnav_expected_premium'
        };

        // ê¸°ë³¸ê°’
        const DEFAULTS = {
            BTC_PRICE: 68443,
            MSTR_PRICE: 133.88,
            BTC_HOLDINGS: 714644,
            SHARES_OUTSTANDING: 365.461,
            TARGET_BTC_PRICE: 100000,
            EXPECTED_PREMIUM: 100
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
        window.addEventListener('DOMContentLoaded', function() {
            loadSavedValues();
            
            // ì…ë ¥ê°’ ë³€ê²½ ì‹œ ìë™ ì €ì¥
            document.getElementById('btcPrice').addEventListener('change', saveValues);
            document.getElementById('mstrPrice').addEventListener('change', saveValues);
            document.getElementById('btcHoldings').addEventListener('change', saveValues);
            document.getElementById('sharesOutstanding').addEventListener('change', saveValues);
            document.getElementById('targetBtcPrice').addEventListener('change', saveValues);
            document.getElementById('expectedPremium').addEventListener('change', saveValues);
        });

        // ì €ì¥ëœ ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSavedValues() {
            document.getElementById('btcPrice').value = 
                localStorage.getItem(STORAGE_KEYS.BTC_PRICE) || DEFAULTS.BTC_PRICE;
            document.getElementById('mstrPrice').value = 
                localStorage.getItem(STORAGE_KEYS.MSTR_PRICE) || DEFAULTS.MSTR_PRICE;
            document.getElementById('btcHoldings').value = 
                localStorage.getItem(STORAGE_KEYS.BTC_HOLDINGS) || DEFAULTS.BTC_HOLDINGS;
            document.getElementById('sharesOutstanding').value = 
                localStorage.getItem(STORAGE_KEYS.SHARES_OUTSTANDING) || DEFAULTS.SHARES_OUTSTANDING;
            document.getElementById('targetBtcPrice').value = 
                localStorage.getItem(STORAGE_KEYS.TARGET_BTC_PRICE) || DEFAULTS.TARGET_BTC_PRICE;
            document.getElementById('expectedPremium').value = 
                localStorage.getItem(STORAGE_KEYS.EXPECTED_PREMIUM) || DEFAULTS.EXPECTED_PREMIUM;
        }

        // ê°’ ì €ì¥í•˜ê¸°
        function saveValues() {
            localStorage.setItem(STORAGE_KEYS.BTC_PRICE, document.getElementById('btcPrice').value);
            localStorage.setItem(STORAGE_KEYS.MSTR_PRICE, document.getElementById('mstrPrice').value);
            localStorage.setItem(STORAGE_KEYS.BTC_HOLDINGS, document.getElementById('btcHoldings').value);
            localStorage.setItem(STORAGE_KEYS.SHARES_OUTSTANDING, document.getElementById('sharesOutstanding').value);
            localStorage.setItem(STORAGE_KEYS.TARGET_BTC_PRICE, document.getElementById('targetBtcPrice').value);
            localStorage.setItem(STORAGE_KEYS.EXPECTED_PREMIUM, document.getElementById('expectedPremium').value);
        }

        // ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
        function resetToDefaults() {
            if (confirm('ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.clear();
                document.getElementById('btcPrice').value = DEFAULTS.BTC_PRICE;
                document.getElementById('mstrPrice').value = DEFAULTS.MSTR_PRICE;
                document.getElementById('btcHoldings').value = DEFAULTS.BTC_HOLDINGS;
                document.getElementById('sharesOutstanding').value = DEFAULTS.SHARES_OUTSTANDING;
                document.getElementById('targetBtcPrice').value = DEFAULTS.TARGET_BTC_PRICE;
                document.getElementById('expectedPremium').value = DEFAULTS.EXPECTED_PREMIUM;
                
                // ê²°ê³¼ ì´ˆê¸°í™”
                document.getElementById('totalBtcValue').textContent = '-';
                document.getElementById('mnavPerShare').textContent = '-';
                document.getElementById('premiumPercent').textContent = '-';
                document.getElementById('premiumLabel').textContent = '-';
                document.getElementById('predictedPrice').textContent = '-';
                
                alert('ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // MNAV ê³„ì‚°
        function calculate() {
            const btcPrice = parseFloat(document.getElementById('btcPrice').value);
            const mstrPrice = parseFloat(document.getElementById('mstrPrice').value);
            const btcHoldings = parseFloat(document.getElementById('btcHoldings').value);
            const sharesOutstanding = parseFloat(document.getElementById('sharesOutstanding').value);

            if (!btcPrice || !mstrPrice || !btcHoldings || !sharesOutstanding) {
                alert('ëª¨ë“  ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ê°’ ì €ì¥
            saveValues();

            // BTC ì´ ê°€ì¹˜ (ë°±ë§Œ ë‹¬ëŸ¬)
            const totalBtcValue = (btcPrice * btcHoldings) / 1000000;
            
            // ì£¼ë‹¹ MNAV
            const mnavPerShare = totalBtcValue / sharesOutstanding;
            
            // í”„ë¦¬ë¯¸ì—„/ë””ìŠ¤ì¹´ìš´íŠ¸
            const premium = ((mstrPrice / mnavPerShare - 1) * 100);

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalBtcValue').textContent = 
                `$${totalBtcValue.toFixed(2)}M`;
            document.getElementById('mnavPerShare').textContent = 
                `$${mnavPerShare.toFixed(2)}`;
            
            const premiumElement = document.getElementById('premiumPercent');
            const premiumLabelElement = document.getElementById('premiumLabel');
            
            premiumElement.textContent = `${premium > 0 ? '+' : ''}${premium.toFixed(2)}%`;
            premiumElement.className = 'result-value ' + (premium >= 0 ? 'premium-positive' : 'premium-negative');
            premiumLabelElement.textContent = premium >= 0 ? 'í”„ë¦¬ë¯¸ì—„' : 'ë””ìŠ¤ì¹´ìš´íŠ¸';
            premiumLabelElement.className = premium >= 0 ? 'premium-positive' : 'premium-negative';
        }

        // ê°€ê²© ì˜ˆì¸¡
        function predictPrice() {
            const targetBtcPrice = parseFloat(document.getElementById('targetBtcPrice').value);
            const expectedPremium = parseFloat(document.getElementById('expectedPremium').value);
            const btcHoldings = parseFloat(document.getElementById('btcHoldings').value);
            const sharesOutstanding = parseFloat(document.getElementById('sharesOutstanding').value);

            if (!targetBtcPrice || !expectedPremium || !btcHoldings || !sharesOutstanding) {
                alert('ëª¨ë“  ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ê°’ ì €ì¥
            saveValues();

            // ì˜ˆìƒ MNAV
            const targetTotalValue = (targetBtcPrice * btcHoldings) / 1000000;
            const targetMnav = targetTotalValue / sharesOutstanding;
            
            // í”„ë¦¬ë¯¸ì—„ ì ìš©
            const predictedMstrPrice = targetMnav * (1 + expectedPremium / 100);

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('predictedPrice').textContent = 
                `$${predictedMstrPrice.toFixed(2)}`;
        }
    </script>
</body>
</html>
